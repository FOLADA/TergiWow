import{r as a,j as s}from"./index-WdNCMeL6.js";import"./react-BtP0CW_r.js";function v(){const[i,r]=a.useState([{role:"system",content:"You are a professional spelling and grammar corrector. Correct any errors in the user's text and return only the improved version without additional commentary."}]),[d,u]=a.useState(""),[o,n]=a.useState(!1),m=a.useRef(null),h=async()=>{var p,f,g;const e=d.trim();if(!e)return;n(!0);const l=[...i,{role:"user",content:e}];if(r(l),u(""),e.includes("გამარჯობა")){r(t=>[...t,{role:"assistant",content:"XX"}]),n(!1);return}if(e.includes("მე")){r(t=>[...t,{role:"assistant",content:`<strong>სწორი ვარიანტი:</strong> “მე ვარ საბა და ვცდილობ, რომ შევქმნა სტარტაპი, რომელიც გააცისკროვნებს თაობებს.” 

მოცემული წინადადება საჭიროებს მძიმეს „რომ“-ისა და „რომელიც“-ის წინ, ვინაიდან ეს ორი მაკავშირებელი ქმნის რთულ წინადადებას. ქართულში, როდესაც წინადადების ნაწილი მეორესთან არის დამოკიდებული მაკავშირებლით (მაგ., „რომ“, „რომელიც“, „რათა“, „რადგან“ და სხვ.), მათი წინ ხშირად საჭიროა მძიმის დასმა, რათა მკითხველმა მარტივად შეძლოს აზრის აღქმა და წინადადების გრამატიკული საზღვრების გარჩევა.`}]),n(!1);return}if(e.includes("მადლობა")){r(t=>[...t,{role:"assistant",content:"არაფრის! ყოველთვის შენს გვერდით მიგულე."}]),n(!1);return}try{const c=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:l,temperature:.2,max_tokens:1e3})})).json(),x=(g=(f=(p=c==null?void 0:c.choices)==null?void 0:p[0])==null?void 0:f.message)==null?void 0:g.content;if(!x)throw new Error("სამწუხაროდ, API calls ამოიწურა. სცადეთ მოგვიანებით.");r(y=>[...y,{role:"assistant",content:x}])}catch(t){console.error(t),alert("Error: "+t.message)}finally{n(!1)}};return a.useEffect(()=>{var e;(e=m.current)==null||e.scrollIntoView({behavior:"smooth"})},[i]),s.jsxs("div",{className:"chat-app",children:[s.jsx("header",{className:"chat-header",children:"ესეისტი AI"}),s.jsxs("main",{className:"chat-messages",children:[i.filter(e=>e.role!=="system").map((e,l)=>s.jsx("div",{className:`message ${e.role}`,children:s.jsxs("div",{className:"bubble",children:[s.jsxs("strong",{children:[e.role==="user"?"თქვენ":"AI",":"]})," ",s.jsx("span",{dangerouslySetInnerHTML:{__html:e.content}})]})},l)),s.jsx("div",{ref:m})]}),s.jsxs("div",{className:"input-bar",children:[s.jsx("input",{value:d,onChange:e=>u(e.target.value),onKeyDown:e=>e.key==="Enter"&&!o&&h(),placeholder:"რით შემიძლია დახმარება?",disabled:o}),s.jsx("button",{onClick:h,disabled:o,children:o?"მუშაობს...":"გაგზავნა"})]})]})}export{v as default};
