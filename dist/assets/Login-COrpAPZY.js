import{r as a,u as x,a as j,j as s,L as v}from"./index-WdNCMeL6.js";import{a as N}from"./index-xsH4HHeE.js";import"./react-BtP0CW_r.js";const f="t8dnHasCWEXALbjTXxwcRJUnaGW_co6mbY_XAid2Lhl4V9tA0A",S=()=>{const[n,u]=a.useState(""),[o,p]=a.useState(""),[r,i]=a.useState(""),t=x(),l=j();a.useEffect(()=>{localStorage.getItem("loggedInUser")&&l.pathname==="/login"&&t("/")},[t,l.pathname]);const h=async e=>{e.preventDefault();try{const d=(await N.get("https://crudapi.co.uk/api/v1/users",{headers:{Authorization:`Bearer ${f}`}})).data.items;console.log(d);const m=d.find(g=>g.email===n&&g.password===o);m?(localStorage.setItem("loggedInUser",JSON.stringify(m.userid)),window.dispatchEvent(new Event("authChanged")),t("/")):i("დარეგისტრირებული არ ხარ")}catch(c){console.error("Login Error:",c),i("შეცდომა! სცადე მოგვიანებით.")}};return s.jsx("div",{className:"login-container",children:s.jsxs("div",{className:"login-div1",children:[s.jsx("h1",{className:"login-h1",children:"შესვლა"}),s.jsxs("form",{className:"login-form",onSubmit:h,children:[s.jsxs("div",{className:"login-div2",children:[s.jsx("label",{htmlFor:"username",className:"login-username",children:"იმეილი:"}),s.jsx("input",{type:"text",id:"username",name:"username",className:"login-input",placeholder:"შეიყვანე ელ.ფოსტა...",value:n,onChange:e=>u(e.target.value)})]}),s.jsxs("div",{className:"login-div3",children:[s.jsx("label",{htmlFor:"password",className:"login-password",children:"პაროლი:"}),s.jsx("input",{type:"password",id:"password",name:"password",className:"login-input",placeholder:"შეიყვანე პაროლი...",value:o,onChange:e=>p(e.target.value)})]}),r&&s.jsx("p",{className:"error-message",children:r}),s.jsx("button",{className:"login-btn",type:"submit",children:"შესვლა"}),s.jsxs("p",{className:"login-p",children:["დარეგისტრირებული არ ხარ?"," ",s.jsx(v,{to:"/რეგისტრაცია",className:"login-link",children:"დარეგისტრირდი"})]})]})]})})};export{S as default};
