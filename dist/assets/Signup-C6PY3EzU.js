import{r as c,u as x,j as e}from"./index-WdNCMeL6.js";import{a as N}from"./index-xsH4HHeE.js";import"./react-BtP0CW_r.js";const g="t8dnHasCWEXALbjTXxwcRJUnaGW_co6mbY_XAid2Lhl4V9tA0A",b=async a=>{try{const o=await N.post("https://crudapi.co.uk/api/v1/users",[a],{headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`}});return console.log("User Created Successfully:",o.data),o.data}catch(o){throw o.response?console.error("API Error:",o.response.data):console.error("Unexpected Error:",o.message),o}},k=()=>{const[a,o]=c.useState({email:"",password:"",confirmPassword:"",phoneNumber:"",username:"",role:"აბიტურიენტი",desc:"",rating:0,isChecked:!1}),[t,i]=c.useState(!1),[r,u]=c.useState({username:"",email:"",phoneNumber:"",password:"",confirmPassword:"",checkbox:""}),m=200,p=x(),h=()=>{const s={username:"",email:"",phoneNumber:"",password:"",confirmPassword:"",checkbox:""};let l=!0;return a.username.trim()||(s.username="აუცილებელია სახელი",l=!1),a.email.trim()?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(a.email)||(s.email="ელ.ფოსტა არასწორია",l=!1):(s.email="აუცილებელია ელ.ფოსტა",l=!1),(!a.phoneNumber||isNaN(Number(a.phoneNumber)))&&(s.phoneNumber="აუცილებელია ტელეფონის ნომერი",l=!1),a.password.length<6&&(s.password="პაროლი უნდა იყოს მინიმუმ 6 სიმბოლო",l=!1),a.password!==a.confirmPassword&&(s.confirmPassword="პაროლები არ ემთხვევა",l=!1),a.role==="რეპეტიტორი"&&!a.isChecked&&(s.checkbox="აუცილებელია თანხმობა",l=!1),u(s),l},f=async s=>{if(s.preventDefault(),!h())return;i(!0);const l={...a,userid:crypto.randomUUID()+(a.role==="რეპეტიტორი"?"tutor":"")};try{await b(l),p("/შესვლა")}catch{alert("რეგისტრაციის შეცდომა!")}finally{i(!1)}},n=(s,l)=>{o(d=>({...d,[s]:l}))};return e.jsxs("div",{className:"signup-container",children:[e.jsx("h2",{className:"signup-title",children:"შექმენი ანგარიში"}),e.jsxs("form",{className:"signup-form",onSubmit:f,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"სახელი"}),e.jsx("input",{className:"form-input",value:a.username,onChange:s=>n("username",s.target.value),placeholder:"სახელის შეყვანა"}),r.username&&e.jsx("span",{className:"error-message",children:r.username})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"ელ.ფოსტა"}),e.jsx("input",{className:"form-input",type:"email",value:a.email,onChange:s=>n("email",s.target.value),placeholder:"sabafola@gmail.com"}),r.email&&e.jsx("span",{className:"error-message",children:r.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"ტელეფონის ნომერი"}),e.jsx("input",{className:"form-input",type:"tel",value:a.phoneNumber,onChange:s=>n("phoneNumber",s.target.value),placeholder:"551002580"}),r.phoneNumber&&e.jsx("span",{className:"error-message",children:r.phoneNumber})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"პაროლი"}),e.jsx("input",{className:"form-input",type:"password",value:a.password,onChange:s=>n("password",s.target.value),placeholder:"პაროლის შეყვანა"}),r.password&&e.jsx("span",{className:"error-message",children:r.password})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"გაიმეორე პაროლი"}),e.jsx("input",{className:"form-input",type:"password",value:a.confirmPassword,onChange:s=>n("confirmPassword",s.target.value),placeholder:"პაროლის დადასტურება"}),r.confirmPassword&&e.jsx("span",{className:"error-message",children:r.confirmPassword})]}),e.jsxs("div",{className:"select-wrapper",children:[e.jsx("label",{className:"form-label",children:"აირჩიე როლი"}),e.jsxs("select",{className:"form-select",value:a.role,onChange:s=>n("role",s.target.value),children:[e.jsx("option",{value:"აბიტურიენტი",children:"აბიტურიენტი"}),e.jsx("option",{value:"რეპეტიტორი",children:"რეპეტიტორი"})]})]}),a.role==="რეპეტიტორი"&&e.jsxs("div",{className:"tutor-fields",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["თქვენს შესახებ",e.jsxs("span",{className:"char-count",children:[a.desc.length,"/",m]})]}),e.jsx("textarea",{className:"form-textarea",value:a.desc,onChange:s=>s.target.value.length<=m&&n("desc",s.target.value),placeholder:"მოკლე აღწერა"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:a.isChecked,onChange:s=>n("isChecked",s.target.checked),className:"styled-checkbox"}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{className:"consent-text",children:"ვეთანხმები ვებსაიტზე ინფორმაციის გამოჩენას"})]}),r.checkbox&&e.jsx("span",{className:"error-message",children:r.checkbox})]})]}),e.jsx("button",{type:"submit",className:"signup-button",disabled:t,children:t?"დამუშავება...":"რეგისტრაცია"})]})]})};export{k as default};
